<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Pos Pro</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="manifest" href="manifest.json">
<link rel="stylesheet" href="css/app.css">
</head>

<body>

<div id="auth">
  <h2>تسجيل الدخول</h2>
  <input id="email" placeholder="البريد الإلكتروني">
  <input id="password" type="password" placeholder="كلمة المرور">
  <button onclick="login()">دخول</button>
</div>

<div id="app" style="display:none">
  <nav>
    <button onclick="show('sales')">المبيعات</button>
    <button onclick="show('purchases')">المشتريات</button>
    <button onclick="show('expenses')">المصروفات</button>
    <button onclick="show('reports')">التقارير</button>
    <button onclick="logout()">خروج</button>
  </nav>

  <section id="sales">صفحة البيع</section>
  <section id="purchases" hidden>المشتريات</section>
  <section id="expenses" hidden>المصروفات</section>
  <section id="reports" hidden>التقارير</section>
</div>

<script type="module">
import { login, logout } from "./js/auth.js";
import { watchAuth } from "./js/firebase.js";

window.login = () =>
  login(email.value, password.value);

window.logout = logout;

window.show = id => {
  document.querySelectorAll("section").forEach(s=>s.hidden=true);
  document.getElementById(id).hidden=false;
};

watchAuth(u => {
  auth.style.display = u ? "none" : "block";
  app.style.display = u ? "block" : "none";
});
</script>

<script>
if("serviceWorker" in navigator){
  navigator.serviceWorker.register("service-worker.js");
}
</script>

</body>
</html>
